var img_target_width=0;var img_target_height=0;var basic_width;var basic_height;var rate=0;var ratial=1;function test(b,a){var e=new Image();var c=new Image();e.src=b;c.src=a;function d(h,g,f){if(h.fileSize<=0||h.width<=0||h.height<=0){$("#loading").remove();$("#outter").append("<h1>404 Error loading picture.</h1>");return}if(e.complete&&c.complete){if(e.height!=c.height||e.width!=c.width){$("#leftframe").remove();$("#outter").append("<h1>Can not handle two img with different size.</h1>");return}else{$("#loading").remove();$("#imgleft").attr("src",g);$("#imgright").attr("src",f);$("#imgleft").width($("#leftframe").width());rate=e.height/e.width;img_target_width=$("#leftframe").width();img_target_height=img_target_width*rate;basic_width=$("#leftframe").width();$("#leftframe").height(img_target_height);$(window).resize(function(){img_target_width=$("#leftframe").width();img_target_height=img_target_width*rate;$("#leftframe").height(img_target_height)})}}else{return}}if(e.complete){d(e,b,a)}else{e.onload=function(){d(e,b,a)}}if(c.complete){d(c,b,a)}else{c.onload=function(){d(c,b,a)}}}test(picurl1,picurl2);function refresh_pic(){img_target_width=basic_width*ratial;img_target_height=rate*img_target_width;$("#times").html("- "+ratial.toString()+"x -");$("#imgleft").width(img_target_width);$("#imgleft").height(img_target_height);$("#imgright").width(img_target_width);$("#imgright").height(img_target_height);$("#leftframe").height(img_target_height);$("#leftframe").width(img_target_width)}function zoomin(){if(ratial==10){return}ratial++;refresh_pic()}function zoomout(){if(ratial==1){return}ratial--;refresh_pic()};